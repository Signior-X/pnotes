function doOnNoteClick(e){if(saveForUnSavedChanges(),console.log("Current Note",window.currentNote),window.currentNote)try{document.getElementById(window.currentNote).classList.remove("is--active"),document.getElementById(window.currentNote).classList.add("hoverable")}catch(e){console.log("Error currentNote invalid!",e.toString())}console.log(e.id),window.currentNote=e.id,e.classList.add("is--active"),e.classList.remove("hoverable"),document.getElementById("remove-note-button").classList.remove("hidden"),document.getElementById("edit-title-button").classList.remove("hidden"),document.getElementById("tab-nav").classList.remove("hidden"),window.editor.id=e.id,window.editor.title=window.notesData[e.id].title,window.editor.description=window.notesData[e.id].description,console.log("Editor changed success!"),console.log(window.editor),makePreviewTabActive()}function makeEditTabActive(){var e=document.getElementById("note-description-editor");e.innerHTML=window.editor.description,e.value=window.editor.description,document.getElementById("editing-button").classList.add("tab-active"),document.getElementById("preview-button").classList.remove("tab-active"),document.getElementById("note-description-content").classList.add("hidden"),document.getElementById("note-description-preview").classList.remove("hidden"),$("#note-description-editor").focus()}function makePreviewTabActive(){var e=document.getElementById("note-description-content");e.innerHTML=md.render(window.editor.description);for(var t=e.getElementsByTagName("a"),o=0;o<t.length;o++)t[o].setAttribute("target","_blank");e.querySelectorAll("pre code").forEach(e=>{hljs.highlightBlock(e)}),document.getElementById("preview-button").classList.add("tab-active"),document.getElementById("editing-button").classList.remove("tab-active"),document.getElementById("note-description-preview").classList.add("hidden"),document.getElementById("note-description-content").classList.remove("hidden")}function changeWindowEditorDescription(e){console.log("Text Area changed!"),window.editor.description=e.value}function newNoteWindow(){saveForUnSavedChanges();var e=addNotefunction("New Note Title","# New Note");console.log(e),console.log("Check Now if new note is created!"),console.log("Now open the new note editor"),window.editor={id:window.currentNote,title:window.notesData[currentNote].title,description:window.notesData[currentNote].description},console.log(window.editor),document.getElementById("tab-nav").classList.remove("hidden"),makeEditTabActive(),document.getElementById("remove-note-button").classList.remove("hidden"),document.getElementById("edit-title-button").classList.remove("hidden"),makeEditTitleBoxVisible()}function restoreState(){window.editor.description=window.notesData[window.currentNote].description,makePreviewTabActive()}function saveNote(){console.log(window.editor);var e=updateNotefunction(window.editor.id,window.editor.title,window.editor.description);console.log(e),restoreState()}function openDeleteNoteModal(){var e=document.getElementById("delete-modal");e.classList.remove("hidden"),e.getElementsByClassName("close")[0].onclick=function(){e.classList.add("hidden")},e.getElementsByClassName("cancel")[0].onclick=function(){e.classList.add("hidden")},confirmDelete=e.getElementsByClassName("confirm-delete")[0],confirmDelete.onclick=function(){deleteCurrentNote(),e.classList.add("hidden")},document.getElementById("modal-message-p").innerHTML="Are you sure you want to delete "+window.editor.title+"?"}function deleteCurrentNote(){console.log(window.currentNote);deleteNotefunction(window.currentNote);document.getElementById("note-description-content").innerHTML="",document.getElementById("note-description-editor").innerHTML="",document.getElementById("note-description-editor").value="",document.getElementById("remove-note-button").classList.add("hidden"),document.getElementById("edit-note-title-box").classList.add("hidden"),document.getElementById("edit-title-button").classList.add("hidden"),document.getElementById("tab-nav").classList.add("hidden"),window.currentNote=""}function makeEditTitleBoxVisible(){function e(){var e=document.getElementById("edit-note-title-input").value;""===e.toString().trim()?alert("Note Title Cannot be empty!"):(updateNotefunction(window.currentNote,e,window.notesData[window.currentNote].description),window.editor.title=e,editNoteTitleBox.classList.add("hidden"))}console.log("Update title"),editNoteTitleBox=document.getElementById("edit-note-title-box"),editNoteTitleBox.classList.remove("hidden"),editNoteTitleBox.getElementsByTagName("input")[0].value=window.editor.title,editNoteTitleBox.getElementsByClassName("cancel")[0].onclick=function(){editNoteTitleBox.classList.add("hidden")},editNoteTitleBox.getElementsByClassName("save")[0].addEventListener("click",e),editNoteTitleBox.addEventListener("keypress",t=>{console.log(t.keyCode),13===t.keyCode&&e()}),$("#edit-note-title-input").focus()}function saveForUnSavedChanges(){if(console.log("Trying to save unsaved changes if present"),window.currentNote&&""!==window.currentNote&&(console.log("Current Note is not empty"),window.notesData[currentNote].description!==window.editor.description)){console.log("Unsaved changes found!");var e=updateNotefunction(window.editor.id,window.editor.title,window.editor.description);console.log(e)}}window.onbeforeunload=function(e){if(window.notesData[window.currentNote].description!==window.editor.description)return console.log("Unsaved Changes Found!"),"you have unsaved changes. Are you sure you want to navigate away?";console.log("No unsaved changes found")},HTMLTextAreaElement.prototype.getCaretPosition=function(){return this.selectionStart},HTMLTextAreaElement.prototype.setCaretPosition=function(e){this.selectionStart=e,this.selectionEnd=e,this.focus()};var textarea=document.getElementById("note-description-editor");textarea.onkeydown=function(e){var t;if(9==e.keyCode)return t=textarea.getCaretPosition()+"    ".length,textarea.value=textarea.value.substring(0,textarea.getCaretPosition())+"    "+textarea.value.substring(textarea.getCaretPosition(),textarea.value.length),textarea.setCaretPosition(t),!1};
